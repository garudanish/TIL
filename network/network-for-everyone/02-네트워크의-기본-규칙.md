# 네트워크의 기본 규칙

## 네트워크의 규칙

### 프로토콜이란?

네트워크에서 문제없이 통신하려면 규칙인 **프로토콜**을 지켜야 한다.

편지를 쓰는 것을 예시로 들어보자. 편지를 쓸 때는 '편지를 쓰는 규칙', '편지를 보내는 규칙', '우체국의 규칙' 등 여러 규칙이 있는데, 이 규칙끼리는 서로 영향을 주지 않는다(독립적이다).

## OSI 모델과 TCP/IP 모델

### OSI 모델이란?

OSI 모델: ISO(국제 표준화기구)에서 제정한 네트워크 통신의 표준 규격

- 네트워크 기술의 기본이 되는 모델.

데이터 송수신: 컴퓨터에서 컴퓨터로 데이터를 전송하는 것.

- 이 데이터의 송수신을 컴퓨터 내부에선 일곱개 계층으로 나눠서 한다.
  - 이 7개 계층이 OSI 모델이다.
  - 데이터는 맨 위의 응용계층에서 순차적으로 아래 계층으로 전달된다.

| 계층  | 이름                              | 설명                                                                        |
| ----- | --------------------------------- | --------------------------------------------------------------------------- |
| 7계층 | 응용 계층(Application Layer)      | 이메일 & 파일 전송, 웹 사이트 조회 등 애플리케이션에 대한 서비스를 제공한다 |
| 6계층 | 표현 계층(Presentation Layer)     | 문자 코드, 압축, 암호화 등의 데이터를 변환한다                              |
| 5계층 | 세션 계층(Session Layer)          | 세션 체결, 통신 방식을 결정한다                                             |
| 4계층 | 전송 계층(Transport Layer)        | 신뢰할 수 있는 통신을 구현한다                                              |
| 3계층 | 네트워크 계층(Network Layer)      | 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정한다             |
| 2계층 | 데이터 링크 계층(Data Link Layer) | 네트워크 기기 간의 데이터 전송 및 물리 주소를 결정한다                      |
| 1계층 | 물리 계층(Physical Layer)         | 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어한다                    |

- 데이터를 전송하는 쪽은 데이터를 보내기 위해 상위 계층에서 하위 계층으로 데이터를 전달한다.
  - 이때, 각 계층은 독립적이므로 데이터가 전달되는 동안에 다른 계층의 영향을 받지 않는다.
- 데이터를 받는 쪽은 하위 계층에서 상위 계층으로 각 계층을 통해 전달된 데이터를 받는다.

### TCP/IP 모델이란?

TCP/IP 모델은 OSI 모델과는 달리 4계층(응용 계층 - 전송 계층 - 인터넷 계층 - 네트워크 접속 계층)으로 단순화시켜 사용한다.

- OSI 모델의 응용, 표현, 세션 계층이 TCP/IP 모델에선 응용 계층으로 합쳐져 있다.
- OSI 모델의 네트워크 계층은 TCP/IP 모델의 인터넷 계층이다.
- OSI 모델의 데이터 링크, 물리 계층이 TCP/IP 모델에선 네트워크 접속 계층으로 합쳐져 있다.

## 캡슐화와 역캡슐화

### 캡슐화와 역캡슐화란?

- 헤더: 다음 계층으로 데이터를 보낼 때, 데이터의 앞부분에 붙이는 전송하는데 필요한 정보.
  - 데이터를 전달받을 상대방에 대한 정보도 포함되어 있다.
- 트레일러: 데이터를 전달할 때 데이터의 마지막에 추가하는 정보

웹사이트에 접속할 때의 흐름은 다음과 같다.

- 응용 계층에서 웹 사이트를 접속하기 위한 요청 데이터가 만들어진다.
- 전송 계층으로 전달되어, 신뢰할 수 있는 통신이 이루어지도록 헤더를 붙인다.
- 네트워크 계층으로 전달되어, 다른 네트워크와 통신하기 위해 헤더를 붙인다.
- 데이터 링크 계층으로 전달되어, 물리적인 통신 채널을 연결하기 위해 헤더와 트레일러를 붙인다.
- 최종적으로 전기 신호로 변환돼서 수신 측에 도착한다.

위와 같이 헤더를 하나씩 붙여 나가는 것을 **캡슐화**라고 한다.

수신 측에서는 각 계층에 해당하는 헤더(및 트레일러)를 제거한 뒤 상위 계층에 전달한다. 이렇게 헤더를 하나씩 제거하는 것을 **역캡슐화**라고 한다.
