# Chaptor 03. 코드에서 나는 악취

## 3.1 기이한 이름

- 코드는 단순하고 명료하게 작성해야 한다.
- 함수, 모듈, 변수, 클래스 등은 그 이름만 보고도 각각이 무슨 일을 하고 어떻게 사용해야 하는지 명확히 알 수 있도록 엄청나게 신경 써서 이름을 지어야 한다.
- (...) 우리가 가장 많이 사용하는 리팩터링도 함수 선언 바꾸기, 변수 이름 바꾸기, 필드 이름 바꾸기처럼 이름을 바꾸는 리팩터링들이다.
- 마땅한 이름이 더오르지 않는다면 설계에 더 근본적인 문제가 숨어 있을 가능성이 높다.

알고는 있는데...

## 3.2 중복 코드

- 똑같은 코드 구조가 여러 곳에서 반복된다면 하나로 통합하여 더 나은 프로그램을 만들 수 있다.
- 코드가 비슷하긴 한데 완전히 똑같지는 않다면, 먼저 문장 슬라이드하기로 비슷한 부분을 한 곳에 모아 함수 추출하기를 더 쉽게 적용할 수 있는지 살펴본다.

냄새나는 코드를 제거하기 위해 냄새나는 코드를 한 곳으로 모으기 같은 건가 싶었다. 그렇다면 '문장 슬라이드하기'는 '리팩터링을 위한 리팩터링'으로 쓰일 수도 있을까?

## 3.3 긴 함수

- 간접 호출의 효과, 즉 코드를 이해하고, 공유하고, 선택하기 쉬워진다는 장점은 함수를 짧게 구성할 때 나오는 것이다.
- 짧은 함수로 구성된 코드를 이해하기 쉽게 만드는 가장 확실한 방법은 좋은 이름이다. 함수 이름을 잘 지어두면 본문 코드를 볼 이유가 사라진다. 그러기 위해서는 훨씬 적극적으로 함수를 쪼개야 한다.
- 함수 이름은 동작 방식이 아닌 의도가 드러나게 짓는다.
- '무엇을 하는지'를 코드가 잘 설명해주지 못할수록 함수로 만드는 게 유리하다.

## 3.4 긴 매개변수 목록

## 3.5 전역 데이터

- 전역 데이터는 코드베이스 어디에서는 건드릴 수 있고 값을 누가 바꿨는지 찾아낼 메커니즘이 없다는 게 문제다.

## 3.6 가변 데이터

## 3.7 뒤엉킨 변경

- 우리는 소프트웨어의 구조를 변경하기 쉬운 형태로 조직한다. 소프트웨어는 자고로 소프트해야 마땅하기 때문이다. 코드를 수정할 때는 시스템에서 고쳐야 할 딱 한 군데를 찾아서 그 부분만 수정할 수 있기를 바란다.
- 뒤엉킨 변경은 단일 책임 원칙이 제대로 지켜지지 않을 때 나타난다. 즉, 하나의 모듈이 서로 다른 이유들로 인해 여러 가지 방식으로 변경되는 일이 많을 때 발생한다.
- 지원해야 할 데이터베이스가 추가될 때마다 함수 세 개를 바꿔야 하고, 금융 상품이 추가될 때마다 또 다른 함수 네 개를 바꿔야 하는 모듈이 있다면 뒤엉킨 변경이 발생했다는 뜻이다.

## 3.8 산탄총 수술

- 이 냄새는 코드를 변경할 때마다 자잘하게 수정해야 하는 클래스가 많을 때 풍긴다.

|           | 뒤엉킨 변경             | 산탄총 수술          |
| --------- | ----------------------- | -------------------- |
| 원인      | 맥락을 잘 구분하지 못함 | (동일)               |
| 해법      | 맥락을 명확히 구분      | (동일)               |
| 발생 과정 | 한 코드에 섞여 들어감   | 여러 코드에 흩뿌려짐 |
| 해법      | 맥락별로 분리           | 맥락별로 모음        |

대부분은 산탄총 수술 냄새가 많이 났던 것 같다. 어설픈 함수 쪼개기의 부작용같은 거라고 해야할지...
