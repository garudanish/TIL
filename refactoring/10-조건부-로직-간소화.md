# Chaptor 10. 조건부 로직 간소화

## 10.1 조건문 분해하기

- 복잡한 조건부 로직은 프로그램을 복잡하게 만드는 가장 흔한 원흉에 속한다. (...) 긴 함수는 그 자체로 읽기가 어렵지만, 조건문은 그 어려움을 한층 가중시킨다.
- 거대한 코드 블록이 주어지면 코드를 부위별로 분해한 다음 해체된 코드 덩어리들을 각 덩어리의 의도를 살린 이름의 함수 호출로 바꿔주자. 그러면 전체적인 의도가 더 확실히 드러난다. 조건문이 보이면 나는 조건식과 각 조건절에 이 작업을 해주길 좋아한다.

## 10.2 조건식 통합하기

- 비교하는 조건은 다르지만 그 결과로 수행하는 동작은 똑같은 코드들이 더러 있는데, 어차피 같은 일을 할 거라면 조건 검사도 하나로 통합하는 게 낫다. 이럴 때 'and' 연산자와 'or' 연산자를 사용하면 여러 개의 비교 로직을 하나로 합칠 수 있다.
- 하나의 검사라고 생각할 수 없는, 다시 말해 진짜로 독립된 검사들이라고 판단되면 이 리팩터링을 해서는 안 된다.

## 10.3 중첩 조건문을 보호 구문으로 바꾸기

- 조건문은 주로 두 가지 형태로 쓰인다. 참인 경로와 거짓인 경로 모두 정상 동작으로 이어지는 형태와, 한쪽만 정상인 형태다. (...) 나는 두 경로 모두 정상 동작이라면 `if`와 `else`절을 사용한다. 한쪽만 정상이라면 비정상 조건을 `if`에서 검사한 다음, 조건이 참이면(비정상이면) 함수에서 빠져나온다. 두 번째 검사 형태를 흔히 보호 구문이라고 한다.

흔히들 early return 이라고 부르는데, 다른 이름을 알게 되어 좋았다.

## 10.4 조건부 로직을 다형성으로 바꾸기

- 조건문 구조를 그대로 둔 채 해결될 때도 있지만, 클래스와 다형성을 이용하면 더 확실하게 분리할 수도 있다.
- 책, 음악, 음식은 다르게 처리해야 한다. 왜? 타입이 다르니까! 타입을 기준으로 분기하는 `switch`문이 포함된 함수가 여러 개 보인다면 분명 이러한 상황이다. 이런 경우 `case`별로 클래스를 하나씩 만들어 공통 `switch` 로직의 중복을 없앨 수 있다. 다형성을 활용하여 어떻게 동작할지를 각 타입이 알아서 처리하도록 하면 된다.
- 기본 동작을 위한 `case`문과 그 변형 동작으로 구성된 로직을 떠올릴 수 있다. 기본 동작은 가장 일반적이거나 가장 직관적인 동작일 것이다. 먼저 이 로직을 슈퍼클래스로 넣어서 변형 동작에 신경 쓰지 않고 기본에 집중하게 한다. 그런 다음 변형 동작을 뜻하는 `case`eㅡㄹ을 각각의 서브클래스로 만든다. 이 서브클래스들은 기본 동작과의 차이를 표현하는 코드로 채워질 것이다.

## 10.5 특이 케이스 추가하기

- 코드베이스에서 특정 값에 대해 똑같이 반응하는 코드가 여러 곳이라면 그 반응들을 한 데로 모으는 게 효율적이다.
- 특수한 경우의 공통 동작을 요소 하나에 모아서 사용하는 특이 케이스 패턴이라는 것이 있는데, 바로 이럴 때 적용하면 좋은 메커니즘이다. 이 패턴을 활용하면 특이 케이스를 확인하는 코드 대부분을 단순한 함수 호출로 바꿀 수 있다.
- `null`은 특이 케이스로 처리해야 할 때가 많다. 그래서 이 패턴을 널 객체 패턴이라고도 한다.

## 10.6 어서션 추가하기

- 특정 조건이 참일 때만 제대로 동작하는 코드 영역이 있을 수 있다. (...) 이런 가정이 코드에 항상 명시적으로 기술되어 있지는 않아서 알고리즘을 보고 연역해서 알아내야 할 때도 있다. 주석에라도 적혀 있다면 그나마 형편이 좀 낫다. 더 나은 방법은 어서션을 이용해서 코드 자체에 삽입해놓는 것이다.
- 어서션은 항상 참이라고 가정하는 조건부 문장으로, 어서션이 실패했다는 건 프로그래머가 잘못했다는 뜻이다. 어서션 실패는 시스템의 다른 부분에서는 절대 검사하지 않아야 하며, 어서션이 있고 없고가 프로그램 기능의 정상 동작에 아무런 영향을 주지 않도록 작성돼야 한다.
- 나는 참이라고 생각하는 가정 모두에 어서션을 달지는 않는다. '반드시 참이어야 하는' 것만 검사한다. (...) 나는 프로그래머가 일으킬만한 오류에만 어서션을 사용한다. 데이터를 외부에서 읽어 온다면 그 값을 검사하는 작업은 (어서션의 대상인) 가정이 아니라 (예외 처리로 대응해야 하는) 프로그램 로직의 일부로 다뤄야 한다.

## 10.7 제어 플래그를 탈출문으로 바꾸기

- 제어 플래그란 코드의 동작을 변경하는 데 사용되는 변수를 말하며, 어딘가에서 값을 계산해 제어 플래그에 설정한 후 다른 어딘가의 조건문에서 검사하는 형태로 쓰인다.
- 제어 플래그의 주 서식지는 반복문 안이다. `break`문이나 `continue`문 활용에 익숙하지 않은 사람이 심어놓기도 하고, 함수의 `return` 문을 하나로 유지하고자 노력하는 사람이 심기도 한다.

하지만... eslint airbnb 스타일은 `continue`를 쓰지 말라고 하는걸...
