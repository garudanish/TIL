# 데이터베이스와 SQL의 기초

## 데이터베이스의 기본 개념

### 데이터는 어떻게 데이터베이스가 되는가

- 데이터: 컴퓨터가 처리할 수 있는 자료
- 데이터베이스: 데이터의 집합, 데이터의 저장 형태.
  - 논리적으로 연관된 데이터를 모아 일정한 형태로 저장해 놓은 것.
  - 여러 시스템 또는 사용자가 데이터를 동시에 공유하고 사용하기 위해 통합 저장한 데이터의 집합
  - 서로 연관된 데이터가 모여있을 때만 데이터베이스라고 할 수 있다.
  - 나열한 여러 데이터를 데이터베이스로 활용하려면 '운동 연관 데이터인지', '영어인지', '중복 데이터를 없는지'를 확인하고 분류해야 한다.

### 데이터베이스는 왜 필요할까?

데이터베이스는 **데이터 중복을 최소화해서 조직의 목적에 맞게 효율적으로 관리**하려고 사용한다.

### 데이터베이스는 ISOS, R1C3으로 정리한다

일반적으로 데이터베이스를 정의할 때는 ISOS, 데이터베이스 시스템의 특징을 이야기할 때는 R1C3를 사용한다.

- ISOS
  - Integrated Data: **통합 데이터**. 데이터 중복이 최소화된 데이터
  - Stored Dta: **저장 데이터**. 컴퓨터가 접근할 수 있는 매체에 저장된 데이터
  - Operational Data: **운영 데이터**. 조직의 고유한 업무를 수행하는 데 필요한 데이터
  - Shared Data: **공용 데이터**. 여러 응용 시스템이 공동으로 소유하고 유지하는 데이터.
- R1C3
  - Real Time Accessibility: **실시간 접근성**. 사용자 질의에 실시간 처리해 응답
  - Continuous Evolution: **지속적인 변화**. 삽입, 삭제, 수정 작업을 통해 항상 최신 데이터를 동적으로 유지.
  - Concurrent Sharing: **동시 공유**. 목적이 다른 여러 사용자가 동시에 같은 데이터를 공유
  - Content Reference: **내용에 의한 참조**. 데이터베이스에 있는 데이터를 참조할 때 레코드의 주소나 위치가 아닌 사용자가 요구하는 데이터 내용으로 참조

### 데이터베이스는 DBMS로 관리한다

데이터를 관리하는 시스템을 데이터베이스 관리 시스템(Database management system, DBMS)이라고 한다.

데이터베이스와 데이터베이스 관리 시스템은 다르다.

- 데이터베이스: 데이터를 담는 통
- 데이터베이스 관리 시스템: 데이터베이스를 관리하는 소프트웨어이다.

데이터베이스에 데이터를 저장하거나 삭제하는 모든 작업은 데이터베이스 관리 시스템을 거쳐야 한다.

## 데이터베이스 종류

데이터베이스는 저장 방법에 따라 계층형, 네트워크형, 키-값, 관계형으로 분류한다.

### 계층형 데이터베이스

- 계층형 데이터베이스: **데이터가 부모와 자식 관계를 이루는 트리 구조**
  - 부모 레코드가 여러 자식 레코드를 가진다.
    - 레코드란 데이터베이스 테이블에 저장된 값들의 모임으로 행(row) 또는 튜플(tuple)이라고도 부른다.
  - 부모 레코드는 여러 개의 자식 레코드를 가질 수 있지만, 자식 레코드는 하나의 부모 레코드만 가질 수 있다.
    - 이 일대다 관계가 무너지만 이러한 구조는 변경하기가 매우 어렵다.
  - 계층형 데이터베이스는 데이터 중복이 발생하기 쉬우며, 상하 종속 관계로 이루어지므로, 초기에 이 방식을 채택하면 이후 프로세스 변경이 어려워 현재는 거의 사용되지 않는다.

### 네트워크형 데이터베이스

- 네트워크형 데이터베이스: **데이터를 노드로 표현한 모델**
  - 노드는 네트워크상에 있으며 서로 대등한 관계다.
  - 계층형 데이터베이스의 단점인 데이터 중복 문제, 상하 종속 관계를 해결했다.
  - 주인 노드 owner node와 멤버 노드 member node가 있다.
    - 멤버 노드는 반드시 주인 노드와 연결되어야 하며, 주인 노드에 있는 레코드와 연관되어야 한다.
    - 멤버 노드는 여러 주인 노드를 가질 수 있다.
  - 즉, 레코드 간의 관계를 일대다 또는 다대다로 표현할 수 있다.
  - 하지만 종속성 문제가 생기기 쉬워 데이터베이스 구조를 변경하기 어렵다.

### 키-값 데이터베이스

- 키-값 데이터베이스: NoSQL의 한 종류, 키-값을 일대일 대응해 데이터를 저장한다.
  - 데이터 중복이 발생하며 비정형 데이터 저장에 유리하다.
    - 비정형 데이터(unstructured data)란 형식이 없는 데이터이다. 텍스트, 음성, 영상 등의 데이터가 비정형 데이터 범위에 속한다.
    - 정형 데이터는 데이터베이스의 정해진 규칙에 맞게 데이터를 저장하며, 각 데이터는 열 이름으로 의미를 쉽게 파악할 수 있다.
    - NoSQL은 비관계형 데이터베이스를 가리킬 때 사용한다.
  - 키-값 데이터베이스는 관계형 데이터베이스와 함께 가장 많이 사용한다. 키-값 스토어(key-value store)라 불리기도 하며, 키와 값을 한 쌍으로 데이터를 저장하는 비관계형 데이터베이스 유형이다.
  - 키-값 데이터베이스는 고유한 식별자로 사용하며, 단순한 객체에서 복잡한 집합체에 이르기까지 무엇이든 키와 값이 될 수 있다.
  - 스키마 없이 작동한다는 점이 특징이다. 따라서 데이터 구조를 미리 정의할 필요가 없으며, 시간이 지나더라도 언제든지 바꿀 수 있다. 키-값은 다양한 형태로 표현할 수 있다.
  - 키-값 데이터베이스 외의 NoSQL의 종류로는 도큐먼트 데이터베이스, 컬럼 데이터베이스, 그래프 데이터베이스 등이 있다.

### 관계형 데이터베이스

- 관계형 데이터베이스: **데이터를 테이블 형태로 저장**한다.
  - 데이터를 열 column과 행row으로 구성한 테이블로 정리하며, 고유키 primary key가 각 행을 식별한다.
  - 데이터는 행 단위로 저장되며, 각 항목의 속성은 열이라고 표현한다. 열 속성에 따라 데이터 유형이 정해진다.
  - 열: 각 열은 고유한 이름을 가지며 자신만의 타입을 가진다. 열은 필드(field), 애트리뷰트(attribute)라고도 한다.
  - 행: 관계된 데이터의 묶음을 의미하며 한 테이블의 모든 행은 같은 수의 열을 가진다. 행은 튜플(tuple), 레코드(record)라고도 한다.
  - 테이블: 행과 열 값들의 모음을 나타내며, 도메인 특성에 따라 데이터를 논리적으로 그룹화해 놓은 것이다.

열과 행 형식으로 데이터를 테이블에 저장하는 것이 관계형 데이터와 관련 있는 이유는 테이블과 테이블 간의 관계 때문이다.

#### ERD로 이해하는 테이블 관계

- ERD: 테이블 간의 관계를 표현한 그림. Entity Relationship Diagram
  - 논리 모델: 데이터 모델의 첫 단계. 고객의 요구 사항을 수집, 분석해 데이터베이스의 전체 모양을 구성하는 것
  - 물리 모델: 논리 모델을 바탕으로 실제 데이터를 저장할 수 있는 모델을 표현한 것

#### 도서 주문 테이블로 알아보는 관계형 데이터베이스의 필요성

한 회원의 주소가 서울에서 부산으로 바뀐다면, 회원 주소를 포함하는 모든 테이블을 모두 찾아 수정해야 한다.

관계형 데이터베이스는 테이블을 분리하고 각 테이블 목적에 맞는 데이터만 저장한 후, 테이블을 참조 관계로 연결한다. 관계형 데이터베이스는 데이터의 중복과 관리 효율성을 추구한다.

만일, 회원 테이블과 주문 테이블로 나누로 회원 번호로 둘을 연결한다면, 회원 주소가 변경됐을 때 회원 테이블만 수정하면 된다.

관계형 데이터베이스는 여러 제품들이 있으며 대중적인 데이터베이스는 SQL Server, Oracle, DB2, PostgreSQL, MySQL, SQLite 등이 있다.

## SQL이란 무엇인가

- SQL: 관계형 데이터베이스 관리 시스템 Relational Database Management System, RDBMS의 데이터를 관리하는 **프로그래밍 언어**
  - SQL은 데이터베이스를 다루는 프로그래밍 언어로 데이터베이스가 아니다.

### DBMS 종류에 따른 SQL 종류

국제 표준화 기구에서 표준화한 SQL 문법을 ANSI SQL이라고 한다. 하지만 ANSI SQL외에도 DBMS 개발사마다 개발한 고유 SQL이 있다.

DBMS 개발사는 ANSI SQL을 따르면서도 제품에 특화한 문법이나 명세를 추가한 SQL을 사용한다. 각자 차이가 있을 수 있지만 대부분 형태나 개념이 비슷하므로 한 언어를 배우면 다른 DBMS의 SQL에도 적응할 수 있다.

### SQL 문법 종류

SQL 문법은 크게 3가지 종류로 나눌 수 있으며 종류에 따른 정의는 다음과 같다.

- 데이터 정의 언어(DDL, Data Define Language)
  - 데이터베이스를 정의하는 언어
  - 테이블 스키마를 관리하는 역할을 하며, 다음 항목을 포함한다.
    - `CREATE`: 데이터베이스 또는 테이블을 생성
    - `ALTER`: 테이블을 수정
    - `DROP`: 데이터베이스 또는 테이블을 삭제
    - `TRUNCATE`: 테이블을 초기화
- 데이터 조작 언어(DML, Data Manipulation Language)
  - 데이터베이스에 입력된 데이터를 검색, 입력, 수정, 삭제하며, 다음 항목을 포함한다.
    - `SELECT`: 데이터를 검색
    - `INSERT`: 데이터를 입력
    - `UPDATE`: 데이터를 수정
    - `DELETE`: 데이터를 삭제
- 데이터 제어 언어(DCL, Data, Control Language)
  - 데이터베이스에 접근하거나 객체에 권한을 부여하는 등의 역할을 하며, 다음 항목을 포함한다.
    - `GRANT`: 특정 데이터베이스 사용자에게 작업의 특정 수행 권한을 부여
    - `REVOKE`: 특정 데이터베이스 사용자에게 작업의 특정 수행 권한을 삭제
    - `COMMIT`: 트랜잭션 작업을 완료
    - `ROLLBACK`: 트랜잭션 작업을 취소하거나 이전 상태로 복구

## SQL을 배워야 하는 이유

### 데이터 홍수 속에서 꼭 필요한 SQL

- 엑셀은 많은 양의 데이터를 처리하기 어려움
  - 사용자 컴퓨터가 서버의 성능을 따라가지 못함.
  - 서버에서 데이터를 처리하려면 SQL을 꼭 알아야 함
- RDBMS, 빅데이터 시스템, NoSQL 시스템 같은 다양한 형태의 데이터베이스를 다룰 수 있음

1. 대부분의 데이터는 SQL을 사용할 수 있는 RDBMS에 저장된다
2. RDBMS에 저장된 데이터를 추출하려면 SQL 문법을 사용해 컴퓨터에 명령을 내려야 한다.
3. RDBMS가 아닌 시스템에도 SQL과 비슷한 문법을 사용해 데이터를 추출할 수 있다.
4. 데이터 분석의 시작은 데이터 추출이다.
