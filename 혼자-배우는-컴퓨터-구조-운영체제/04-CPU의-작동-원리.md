# Chapter 04. CPU의 작동 원리

## 4-1. ALU와 제어장치

### ALU

- ALU가 계산을 하기 위해서는 피연산자와 수행할 연산이 필요하다.
- ALU는 레지스터를 통해 피연산자를 받아들이고, 제어장치로부터 수행할 연산을 알려주는 제어 신호를 받아들인다.
- 연산을 수행한 결과는 특정 숫자, 문자, 메모리 주소가 될 수 있고, 이 결괏값은 일시적으로 레지스터에 저장된다.
  - CPU가 접근하는 속도가 메모리보다 레지스터에 접근할 때 더 빠르므로 레지스터에 우선 저장한다.
- ALU는 계산 결과와 더불어, 연산 결과에 대한 추가적인 정보를 내보내야 할 때 플래그를 내보낸다.
- 대표적인 플래그는 다음과 같다
  - 부호 플래그: 연산한 결과의 부호
  - 제로 플래그: 연산 결과가 0인지 여부
  - 캐리 플래그: 연산 결과 올림수나 빌림수가 발생했는지
  - 오버플로우 플래그: 오버플로우(연산 결과가 연산 결과를 담을 레지스터보다 큰 상황)가 발생했는지
  - 인터럽트 플래그: 인터럽트가 가능한지
  - 슈퍼바이저 플래그: 커널 모드로 실행 중인지, 사용자 모드로 실행 중인지
- 플래그들은 플래그 레지스터라는 레지스터에 저장된다.
- 이 외에도 ALU 내부에는 여러 계산을 위한 회로들이 있다.

### 제어장치

- 제어장치는 CPU의 구성 요소 중 가장 정교하게 설계된 부품이라고 할 수 있다.
- 제어장치는 클럭 신호를 받아들인다.
  - 클럭: 컴퓨터의 모든 부품을 일사불란하게 움직일 수 있게 하는 시간 단위
  - 컴퓨터의 모든 부품은 클럭의 주기에 맞춰 작동한다.
  - 단 한 클럭마다 작동한다는 뜻은 아니다. 하나의 명령어가 여러 클럭에 걸쳐 실행될 수 있다.
- 제어장치는 '해석해야 할 명령어'를 받아들인다.
  - CPU가 해석해야 할 명령어는 명령어 레지스터라는 특별한 레지스터에 저장된다.
  - 제어장치는 이 명령어 레지스터로부터 해석할 명령어를 받아들이고 해석한 뒤, 제어 신호를 발생시켜 컴퓨터 부품들에 수행해야 할 내용을 알려준다.
- 제어장치는 플래그 레지스터 속 플래그 값을 받아들인다.
- 제어장치는 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들인다.
  - 제어 신호는 CPU를 비롯해 입출력장치 등 CPU 외부 장치도 발생시킬 수 있다.
  - 제어장치는 제어 버스를 통해 외부로부터 전달된 제어 신호를 받아들이기도 한다.
- 제어장치는 제어신호를 CPU 내외부에 전달한다.
- CPU 외부에 제어 신호를 전달한다는 말은 곧 제어 버스로 제어 신호를 내보낸다는 말과 같다.
  - 메모리에 전달하는 제어 신호와 입출력장치(보조기억장치 포함)에 전달하는 제어 신호가 있다.
- CPU 내부에 전달하는 제어 신호에는 크게 ALU에 전달하는 제어 신호와 레지스터에 전달하는 제어신호가 있다.
  - ALU에는 수행할 연산을 지시하기 위해 제어 신호를 전달한다.
  - 레지스터에는 레지스터 간 데이터를 이동시키거나 레지스터에 저장된 명령어를 해석하기 위해 제어 신호를 전달한다.
